//===========================================================
//本项目将TIM4用于SBUS_IO模式的波特率输出 100K
//===========================================================
#include "main.h"
#include "tim0.h"

//#define	TH0VAL ((65536-FOSC/12/1000*MAIN_CYCTIME)/256)
//#define	TL0VAL ((65536-FOSC/12/1000*MAIN_CYCTIME)%256)

//===========================================================
//		配置TIM0
//===========================================================
void TIM0_Config(void)
{
	T2MOD |= bT0_CLK;		//定时器时钟1/1T模式
	TMOD&=0xf0;		//16位定时器模式
	TMOD|=0x01;		//工作在模式1，16位定时器模式
	TH0=TH0VAL;
	TL0=TL0VAL;
	ET0=1;			//开中断
}
////===========================================================
////		使能TIM0
////===========================================================
//void TIM0_Enable(void)
//{
//	TR0=1;
//}
////===========================================================
////		关闭TIM0
////===========================================================
//void TIM0_Disable(void)
//{
//	TR0=0;
//}

////===========================================================
////    TIMER 0 interrupt subroutine
////===========================================================
//void Timer0_ISR (void) interrupt 1  //interrupt address is 0x000B
//{
////    TH0=TH0VAL;
////	TL0=TL0VAL;
//    main_TM++;
////    P17^=1;
//}
